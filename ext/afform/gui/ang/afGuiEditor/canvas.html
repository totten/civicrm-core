<div class="row">
  <div class="col-md-12">

    <div class="pull-right">
      <div class="btn-group btn-group-sm">
        <button type="submit" class="btn btn-sm" ng-class="{'btn-primary': !changesSaved && !saving, 'btn-warning': saving, 'btn-success': changesSaved}" ng-disabled="changesSaved || saving || !afform.title" ng-click="save()">
          <i class="crm-i" ng-class="{'fa-check': !saving, 'fa-spin fa-spinner': saving}"></i>
          <span ng-if="changesSaved && !saving">{{ ts('Saved') }}</span>
          <span ng-if="!changesSaved && !saving">{{ ts('Save') }}</span>
          <span ng-if="saving">{{ ts('Saving...') }}</span>
        </button>
      </div>
    </div>

    <uib-tabset>
      <uib-tab heading="{{ts('Form Layout')}}">
        <div ng-if="layout" af-gui-container="layout" entity-name="" />
      </uib-tab>
      <uib-tab heading="{{ts('Markup')}}" select="updateLayoutHtml()">
        <p class="help-block">{{ts('This is a read-only preview of the auto-generated markup.')}}</p>
        <!-- Wiring up edit mode wouldn't be super-hard in itself, but it's not worthwhile until we have validation to ensure that GUI+raw content are exchangeable  -->
        <div crm-monaco="{readOnly: true}" ng-model="layoutHtml"></div>
      </uib-tab>
    </uib-tabset>

  </div>
</div>
